# Chapter 14: 일관성 있는 협력

## 일관성을 위한 설계 지침

### 1. 변하는 개념을 변하지 않는 개념으로부터 분리하라
- **변하지 않는 개념**은 시스템의 기반이 되며, 설계의 안정성을 높이는 역할을 한다.
- **변하는 개념**은 새로운 요구사항이나 변화에 의해 수정될 가능성이 높다.
- **분리의 목적**: 변화를 최소화하고 시스템의 예측 가능성을 유지하기 위함.

---

### 2. 변하는 개념을 캡슐화하라
캡슐화는 변화를 통제하고 설계의 영향을 최소화하는 핵심 원칙이다.

#### 캡슐화의 유형
1. **데이터 캡슐화**  
   - 내부 데이터를 외부로부터 감추고, 필요한 경우에만 접근 가능한 메서드를 제공.  
   - 예: `private` 필드와 `getter/setter` 메서드.

2. **메서드 캡슐화**  
   - 메서드의 세부 구현을 외부로부터 감춤.  
   - 호출자는 메서드의 동작만 알면 되고, 내부 구현에 의존하지 않음.

3. **객체 캡슐화**  
   - 객체의 상태와 동작을 하나의 단위로 묶어 외부와의 인터페이스를 제한.  
   - 객체 외부에서는 객체의 퍼블릭 인터페이스만을 통해 접근 가능.

4. **서브타입 캡슐화**  
   - 타입 계층의 변화로부터 클라이언트를 보호하기 위해 상위 타입의 인터페이스를 사용.  
   - 클라이언트는 하위 타입의 구체적 구현에 의존하지 않음.

---

### 캡슐화의 본질
- 단순히 **데이터 은닉**에 국한되지 않음.
- **코드 수정으로 인한 파급효과를 제어**할 수 있는 모든 설계 기법을 포함.
  - 예: 모듈화, 인터페이스 분리, 설계 패턴 활용.

---

## 타입 계층 설계 원칙
### 1. 변하는 부분을 분리해서 타입 계층을 만든다
- 변화가 예상되는 부분을 **독립적인 타입 계층**으로 만들어 수정의 영향을 최소화.
- 예: 사용자 인증 방식 변경을 `Authentication` 타입 계층으로 분리.

### 2. 변하지 않는 부분의 일부로 타입 계층을 합성한다
- 변하지 않는 안정적인 개념은 타입 계층의 기반이 되어야 함.
- 이를 통해 타입 계층 간의 협력이 일관성을 유지함.

---

## 요약
- 설계의 일관성을 유지하려면 **변하는 개념**과 **변하지 않는 개념**을 명확히 분리하고, 변화를 **캡슐화**해야 함.
- 타입 계층 설계를 통해 협력을 체계적으로 관리할 수 있음.
- 캡슐화는 단순히 데이터 은닉이 아니라 설계의 안정성을 강화하고 변경의 영향을 최소화하는 기술임.
